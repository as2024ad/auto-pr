# 183369419+as2024ad@users.noreply.github.com
# A

# - the sitemap is generated in the ./Utilities folder
# - move the sitemap from ./Utilities to www folder, replacing the sitemap currently in there
# - update the delete branches setting

name: Auto PR-WORKING-COPY

on:
  schedule:
    - cron: "00 00 * * *"
  workflow_dispatch:

# complete the GitHub workflow:
jobs:
  createPullRequest:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4






      # - generate a mock sitemap in the ./Utilities folder
      - name: Generate mock sitemap
        run: |
          mkdir -p Utilities
          cat > Utilities/sitemap.xml <<EOL
          <?xml version="1.0" encoding="UTF-8"?>
          <urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
            <url><loc>https://example.com/</loc></url>
          </urlset>
          EOL

      # move the sitemap from ./Utilities to the ./app-directory/wwwroot folder, replacing the sitemap currently in there
      - name: Move sitemap to target directory
        run: |
          mkdir -p /app-directory/wwwroot
          mv -f Utilities/sitemap.xml /app-directory/wwwroot/sitemap.xml






      - name: Create Pull Request
        id: cpr
        uses: peter-evans/create-pull-request@v7
        with:
          token: ${{ secrets.PAT_TOKEN }}
          commit-message: Update report
          committer: github-actions[bot] <183369419+github-actions[bot]@users.noreply.github.com>
          author: ${{ github.actor }} <${{ github.actor_id }}+${{ github.actor }}@users.noreply.github.com>
          signoff: false
          branch: create-pull-request/sitemap
          delete-branch: true
          title: "[Example] Update report"
          body: |
            Update report
            - Updated with *today's* date
            - Auto-generated by [create-pull-request][1]

            [1]: https://github.com/peter-evans/create-pull-request
          labels: |
            report
            automated pr
          # assignees: as2024ad
          # reviewers: as2024ad
          # team-reviewers: |
          #   developers
          #   qa-team
          #milestone: 1
          draft: false
